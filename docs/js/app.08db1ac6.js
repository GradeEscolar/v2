(function(){"use strict";var e={3347:function(e,t,i){var n=i(9963),r=i(6252),a=i(3577),o={class:"main_section"},s={key:0},u={key:1},c={key:2},l={key:3},d={key:4},f={key:5},b={key:6},p={key:7},h={key:8},v={key:9},g={key:0},m=(0,r._)("p",null," Grade Escolar 2023 - v 2.0 ",-1);function w(e,t,i,n,w,y){var _=(0,r.up)("HeaderComponent"),P=(0,r.up)("HomeView"),k=(0,r.up)("LoginView"),T=(0,r.up)("CadastroView"),O=(0,r.up)("MenuView"),D=(0,r.up)("AulaView"),j=(0,r.up)("AnotacoesView"),S=(0,r.up)("DisciplinaConfigView"),C=(0,r.up)("GradeConfigView"),x=(0,r.up)("AulaConfigView"),G=(0,r.up)("BackupView");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("header",null,[(0,r.Wm)(_,{onGoToPage:e.goToPage,page:e.page,"hide-back-button":e.hideBackButton},null,8,["onGoToPage","page","hide-back-button"])]),(0,r._)("main",null,[(0,r._)("section",o,["Home"==e.page?((0,r.wg)(),(0,r.iD)("div",s,[(0,r.Wm)(P,{onGoToPage:e.goToPage},null,8,["onGoToPage"])])):(0,r.kq)("",!0),"Login"==e.page?((0,r.wg)(),(0,r.iD)("div",u,[(0,r.Wm)(k,{onGoToPage:e.goToPage},null,8,["onGoToPage"])])):(0,r.kq)("",!0),"Cadastro"==e.page?((0,r.wg)(),(0,r.iD)("div",c,[(0,r.Wm)(T,{onGoToPage:e.goToPage},null,8,["onGoToPage"])])):(0,r.kq)("",!0),"Menu"==e.page?((0,r.wg)(),(0,r.iD)("div",l,[(0,r.Wm)(O,{onGoToPage:e.goToPage},null,8,["onGoToPage"])])):(0,r.kq)("",!0),"Aula"==e.page?((0,r.wg)(),(0,r.iD)("div",d,[(0,r.Wm)(D,{onGoToPage:e.goToPage,onHideBackButton:e.definirHideBackButton},null,8,["onGoToPage","onHideBackButton"])])):(0,r.kq)("",!0),"Anotacoes"==e.page?((0,r.wg)(),(0,r.iD)("div",f,[(0,r.Wm)(j,{onGoToPage:e.goToPage},null,8,["onGoToPage"])])):(0,r.kq)("",!0),"DisciplinaConfig"==e.page?((0,r.wg)(),(0,r.iD)("div",b,[(0,r.Wm)(S,{onGoToPage:e.goToPage},null,8,["onGoToPage"])])):(0,r.kq)("",!0),"GradeConfig"==e.page?((0,r.wg)(),(0,r.iD)("div",p,[(0,r.Wm)(C,{onGoToPage:e.goToPage},null,8,["onGoToPage"])])):(0,r.kq)("",!0),"AulaConfig"==e.page?((0,r.wg)(),(0,r.iD)("div",h,[(0,r.Wm)(x,{onGoToPage:e.goToPage},null,8,["onGoToPage"])])):(0,r.kq)("",!0),"Backup"==e.page?((0,r.wg)(),(0,r.iD)("div",v,[(0,r.Wm)(G,{onGoToPage:e.goToPage},null,8,["onGoToPage"])])):(0,r.kq)("",!0)])]),(0,r._)("footer",null,[(0,r._)("p",null,[e.usuario.nome?((0,r.wg)(),(0,r.iD)("span",g," Olá, "+(0,a.zw)(e.usuario.nome)+"! ",1)):(0,r.kq)("",!0)]),m])],64)}var y=function(e){return(0,r.dD)("data-v-09e8740c"),e=e(),(0,r.Cn)(),e},_={id:"header"},P=y((function(){return(0,r._)("i",{class:"no-print pi pi-chevron-left"},null,-1)})),k=[P],T={id:"icon"},O={id:"title"},D=y((function(){return(0,r._)("i",{class:"pi pi-sign-in"},null,-1)})),j=y((function(){return(0,r._)("span",null,"Entrar",-1)})),S=[D,j],C=y((function(){return(0,r._)("i",{class:"pi pi-sign-out"},null,-1)})),x=y((function(){return(0,r._)("span",null,"Sair",-1)})),G=[C,x];function A(e,t,i,n,o,s){return(0,r.wg)(),(0,r.iD)("div",_,[(0,r._)("div",{id:"back",style:(0,a.j5)({visibility:e.back?"visible":"hidden"}),onClick:t[0]||(t[0]=function(t){return e.goToPage(e.backTo)})},k,4),(0,r._)("div",T,[(0,r._)("i",{class:(0,a.C_)(e.icon)},null,2)]),(0,r._)("div",O,(0,a.zw)(e.title),1),e.login?((0,r.wg)(),(0,r.iD)("div",{key:0,id:"login",onClick:t[1]||(t[1]=function(t){return e.doLogin()})},S)):(0,r.kq)("",!0),e.sair?((0,r.wg)(),(0,r.iD)("div",{key:1,id:"sair",onClick:t[2]||(t[2]=function(t){return e.doSair()})},G)):(0,r.kq)("",!0)])}var I=i(655),R=function(){function e(){}return Object.defineProperty(e,"db",{enumerable:!0,configurable:!0,writable:!0,value:"GradeEscolar"}),Object.defineProperty(e,"usuarioTable",{enumerable:!0,configurable:!0,writable:!0,value:"usuarios"}),Object.defineProperty(e,"gradeTable",{enumerable:!0,configurable:!0,writable:!0,value:"grade"}),Object.defineProperty(e,"disciplinaTable",{enumerable:!0,configurable:!0,writable:!0,value:"disciplinas"}),Object.defineProperty(e,"anotacaoTable",{enumerable:!0,configurable:!0,writable:!0,value:"anotacoes"}),Object.defineProperty(e,"aulaTable",{enumerable:!0,configurable:!0,writable:!0,value:"aulas"}),e}(),q=R,B=function(){function e(){Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"id_usuario",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"aulas",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"dias",{enumerable:!0,configurable:!0,writable:!0,value:""})}return e}(),J=B,H=function(){function e(){}return Object.defineProperty(e.prototype,"source",{get:function(){return e.source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(e.source)return new Promise((function(e){return e()}));var t=window.indexedDB.open(q.db,1);return t.onupgradeneeded=this.upgradeneeded,new Promise((function(i,n){t.onsuccess=function(){return(0,I.mG)(this,void 0,void 0,(function(){return(0,I.Jh)(this,(function(t){return e.source=this.result,i(),[2]}))}))},t.onerror=function(){var t;e.source=void 0,console.log(this.error),n(null===(t=this.error)||void 0===t?void 0:t.message)}}))}}),Object.defineProperty(e.prototype,"upgradeneeded",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this,i=this.result,n=[q.usuarioTable,q.gradeTable,q.disciplinaTable,q.anotacaoTable,q.aulaTable];n.forEach((function(n){i.objectStoreNames.contains(n)||i.createObjectStore(n,{autoIncrement:!0,keyPath:"id"});var r=t.transaction,a=r.objectStore(n);e.createIndex(a,q.usuarioTable,"nome","nome",{unique:!0}),e.createIndex(a,q.gradeTable,"usuario","id_usuario",{unique:!1}),e.createIndex(a,q.disciplinaTable,"usuario","id_usuario",{unique:!1}),e.createIndex(a,q.aulaTable,"grade_dia",["id_grade","dia"],{unique:!1}),e.createIndex(a,q.aulaTable,"disciplina","id_disciplina",{unique:!1}),e.createIndex(a,q.anotacaoTable,"aula_disciplina_data",["aula","id_disciplina","data"],{unique:!0}),e.createIndex(a,q.anotacaoTable,"disciplina_data",["id_disciplina","data"],{unique:!0}),e.createIndex(a,q.anotacaoTable,"disciplina","id_disciplina",{unique:!1})}))}}),Object.defineProperty(e,"createIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,n,r){e.name!=t||e.indexNames.contains(i)||e.createIndex(i,n,r)}}),Object.defineProperty(e,"iniciarGrade",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.transaction(q.gradeTable,"readwrite"),i=t.objectStore(q.gradeTable),n=i.count();return new Promise((function(e,t){n.onsuccess=function(n){var r=1==n.target.result;if(r)e();else{var a=new J;a.dias="2;3;4;5;6",a.aulas=5;var o=JSON.parse(JSON.stringify(a,(function(e,t){return"id"==e?void 0:t}))),s=i.add(o);s.onsuccess=function(){e()},s.onerror=function(){t(this.error)}}},n.onerror=function(){t(this.error)}}))}}),Object.defineProperty(e,"source",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}(),E=H,M=function(e){function t(t){var i=e.call(this)||this;return Object.defineProperty(i,"table",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i.table=t,i}return(0,I.ZT)(t,e),Object.defineProperty(t.prototype,"db",{get:function(){return this.source},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"config",{enumerable:!1,configurable:!0,writable:!0,value:function(){return e.prototype.config.call(this)}}),Object.defineProperty(t.prototype,"count",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e=null!==e&&void 0!==e?e:this.db.transaction(this.table,"readonly");var t=e.objectStore(this.table),i=t.count();return new Promise((function(e,t){i.onsuccess=function(){e(this.result)},i.onerror=function(){var e;console.log(this.error),t(null===(e=this.error)||void 0===e?void 0:e.message)}}))}}),Object.defineProperty(t.prototype,"findOnly",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){i=null!==i&&void 0!==i?i:this.db.transaction(this.table,"readonly");var n=i.objectStore(this.table),r=n.index(e),a=r.openCursor(IDBKeyRange.only(t));return new Promise((function(e,t){var i=[];a.onsuccess=function(){var t=this.result;t?(i.push(t.value),t.continue()):e(i)},a.onerror=function(){var e;console.log(this.error),t(null===(e=this.error)||void 0===e?void 0:e.message)}}))}}),Object.defineProperty(t.prototype,"getById",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this.table;t=null!==t&&void 0!==t?t:this.db.transaction(this.table,"readonly");var n=t.objectStore(this.table),r=n.get(e);return new Promise((function(t,n){r.onsuccess=function(){t(this.result)},r.onerror=function(){var t;console.error("DisciplinaRepository.getById(".concat(e,")"),i,this.error),n(null===(t=this.error)||void 0===t?void 0:t.message)}}))}}),Object.defineProperty(t.prototype,"getAll",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e=null!==e&&void 0!==e?e:this.db.transaction(this.table,"readonly");var t=e.objectStore(this.table),i=t.getAll();return new Promise((function(e,t){i.onsuccess=function(){e(this.result)},i.onerror=function(){var e;console.log(this.error),t(null===(e=this.error)||void 0===e?void 0:e.message)}}))}}),Object.defineProperty(t.prototype,"post",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this.getAll(t)}}),Object.defineProperty(t.prototype,"add",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this.table;t=null!==t&&void 0!==t?t:this.db.transaction(i,"readwrite");var n=t.objectStore(i),r=n.add(this.parseModel(e,!0));return new Promise((function(t,n){r.onsuccess=function(){e.id=this.result,t()},r.onerror=function(){var t;console.error("RepositoryBase.add",i,e,this.error),n(null===(t=this.error)||void 0===t?void 0:t.message)}}))}}),Object.defineProperty(t.prototype,"put",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this.table;t=null!==t&&void 0!==t?t:this.db.transaction(i,"readwrite");var n=t.objectStore(i),r=n.put(this.parseModel(e,!1));return new Promise((function(t,n){r.onsuccess=function(){t()},r.onerror=function(){var t;console.error("RepositoryBase.put",i,e,this.error),n(null===(t=this.error)||void 0===t?void 0:t.message)}}))}}),Object.defineProperty(t.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){t=null!==t&&void 0!==t?t:this.db.transaction(this.table,"readwrite");var i=t.objectStore(this.table),n=i.delete(e.id);return new Promise((function(t,i){n.onsuccess=function(){t()},n.onerror=function(){var t;console.error("DisciplinaRepository.delete",e,this.error),i(null===(t=this.error)||void 0===t?void 0:t.message)}}))}}),Object.defineProperty(t.prototype,"deleteByIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){var n=this;return new Promise((function(r,a){var o=n.table;i=null!==i&&void 0!==i?i:n.db.transaction(n.table,"readwrite");var s=i.objectStore(o),u=s.index(e),c=u.openCursor(IDBKeyRange.only(t));c.onsuccess=function(){var t=this.result;if(t){var i=t.delete();i.onsuccess=function(){t.continue()},i.onerror=function(){var t;console.error("deleteByIndex.request: ".concat(o,".").concat(e),this.error),a(null===(t=this.error)||void 0===t?void 0:t.message)}}else r()},c.onerror=function(){var t;console.error("deleteByIndex: ".concat(o,".").concat(e),this.error),a(null===(t=this.error)||void 0===t?void 0:t.message)}}))}}),Object.defineProperty(t.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return new Promise((function(i,n){var r=t.table;e=null!==e&&void 0!==e?e:t.db.transaction(t.table,"readwrite");var a=e.objectStore(r),o=a.clear();o.onsuccess=function(){i()},o.onerror=function(){var e;console.error("clear: ".concat(r),this.error),n(null===(e=this.error)||void 0===e?void 0:e.message)}}))}}),Object.defineProperty(t.prototype,"parseModel",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return JSON.parse(JSON.stringify(e,(function(e,i){return t&&"id"==e?void 0:i})))}}),Object.defineProperty(t.prototype,"createTransaction",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.db.transaction(e,"readwrite")}}),t}(E),V=M,U=function(){function e(){Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nome",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"email",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"senha",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return e}(),z=U,Z=function(e){function t(){return e.call(this,q.usuarioTable)||this}return(0,I.ZT)(t,e),Object.defineProperty(t.prototype,"existeUsuario",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,I.mG)(this,void 0,Promise,(function(){var t;return(0,I.Jh)(this,(function(i){switch(i.label){case 0:return[4,this.findOnly("nome",e)];case 1:return t=i.sent(),[2,1==t.length]}}))}))}}),Object.defineProperty(t.prototype,"criarUsuario",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,I.mG)(this,void 0,Promise,(function(){var t=this;return(0,I.Jh)(this,(function(i){return[2,new Promise((function(i,n){var r=t.db.transaction([q.usuarioTable,q.gradeTable],"readwrite"),a=r.objectStore(q.usuarioTable),o=r.objectStore(q.gradeTable),s=new z;s.nome=e;var u=a.add(t.parseModel(s,!0));u.onsuccess=function(e){s.id=e.target.result;var r=new J;r.id_usuario=s.id,r.dias="2;3;4;5;6",r.aulas=5;var a=o.add(t.parseModel(r,!0));a.onsuccess=function(){i(s)},a.onerror=function(){var e;console.log(this.error),n(null===(e=this.error)||void 0===e?void 0:e.message)}},u.onerror=function(){var e;console.log(this.error),n(null===(e=this.error)||void 0===e?void 0:e.message)}}))]}))}))}}),t}(V),F=Z,L=function(){function e(){Object.defineProperty(this,"_repository",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return Object.defineProperty(e.prototype,"repository",{get:function(){return this._repository},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseConfig",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,I.mG)(this,void 0,Promise,(function(){return(0,I.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this._repository=e(),[4,this._repository.config()];case 1:return t.sent(),[2,!0];case 2:return t.sent(),[2,!1];case 3:return[2]}}))}))}}),Object.defineProperty(e.prototype,"parseModel",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return JSON.parse(JSON.stringify(e,(function(e,i){return t&&"id"==e?void 0:i})))}}),e}(),N=L,$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,I.ZT)(t,e),Object.defineProperty(t.prototype,"config",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.baseConfig((function(){return new F}))}}),Object.defineProperty(t.prototype,"existeUsuario",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,I.mG)(this,void 0,Promise,(function(){var e;return(0,I.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.repository.count()];case 1:return e=t.sent(),[2,e>0]}}))}))}}),Object.defineProperty(t.prototype,"cadastrar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,I.mG)(this,void 0,Promise,(function(){var t,i;return(0,I.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.repository.existeUsuario(e)];case 1:if(t=n.sent(),t)throw new Error("O nome informado já existe!");return[4,this.repository.criarUsuario(e)];case 2:return i=n.sent(),this.selecionar(i),[2]}}))}))}}),Object.defineProperty(t.prototype,"selecionar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){localStorage.setItem("id_usuario",e.id.toString()),localStorage.setItem("nome_usuario",e.nome)}}),Object.defineProperty(t.prototype,"obterUsuarios",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,I.mG)(this,void 0,Promise,(function(){return(0,I.Jh)(this,(function(e){return[2,this.repository.getAll()]}))}))}}),t}(N),K=$,Y=(0,r.aZ)({name:"HeaderComponent",data:function(){return{loginService:new K,back:!1,backTo:"",icon:"",title:"",login:!1,sair:!1}},props:{page:String,hideBackButton:Boolean},emits:["goToPage"],methods:{goToPage:function(e){this.$emit("goToPage",e)},doLogin:function(){return(0,I.mG)(this,void 0,void 0,(function(){var e,t,i;return(0,I.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.loginService.config()];case 1:return e=n.sent(),e?[4,this.loginService.existeUsuario()]:[2];case 2:return t=n.sent(),i=t?"Login":"Cadastro",this.goToPage(i),[2]}}))}))},doSair:function(){localStorage.removeItem("id_usuario"),localStorage.removeItem("nome_usuario"),this.goToPage("Home")},definirHeader:function(){var e=localStorage.getItem("page");"Home"==e?(this.back=!1,this.backTo="",this.icon="pi pi-table",this.title="Grade Escolar",this.login=!0,this.sair=!1):"Login"==e?(this.back=!0,this.backTo="Home",this.icon="pi pi-sign-in",this.title="Login",this.login=!1,this.sair=!1):"Cadastro"==e?(this.back=!0,this.backTo="Home",this.icon="pi pi-id-card",this.title="Cadastro",this.login=!1,this.sair=!1):"Menu"==e?(this.back=!1,this.backTo="",this.icon="pi pi-table",this.title="Grade Escolar",this.login=!1,this.sair=!0):"Aula"==e?(this.back=!this.hideBackButton,this.backTo="Menu",this.icon="pi pi-file-edit",this.title="Aulas",this.login=!1,this.sair=!1):"Anotacoes"==e?(this.back=!this.hideBackButton,this.backTo="Menu",this.icon="pi pi-book",this.title="Anotações",this.login=!1,this.sair=!1):"DisciplinaConfig"==e?(this.back=!0,this.backTo="Menu",this.icon="pi pi-cog",this.title="Disciplinas",this.login=!1,this.sair=!1):"GradeConfig"==e?(this.back=!0,this.backTo="Menu",this.icon="pi pi-cog",this.title="Grade",this.login=!1,this.sair=!1):"AulaConfig"==e?(this.back=!0,this.backTo="Menu",this.icon="pi pi-cog",this.title="Aulas",this.login=!1,this.sair=!1):"Backup"==e&&(this.back=!0,this.backTo="Menu",this.icon="pi pi-save",this.title="Cópia de segurança",this.login=!1,this.sair=!1)}},mounted:function(){this.definirHeader()},watch:{page:function(){this.definirHeader()},hideBackButton:function(){this.definirHeader()}}}),W=i(3744);const Q=(0,W.Z)(Y,[["render",A],["__scopeId","data-v-09e8740c"]]);var X=Q,ee=function(e){return(0,r.dD)("data-v-a1b4ee30"),e=e(),(0,r.Cn)(),e},te=ee((function(){return(0,r._)("i",{class:"pi pi-table"},null,-1)})),ie=ee((function(){return(0,r._)("p",null," Olá! ",-1)})),ne=ee((function(){return(0,r._)("p",null," Aqui você pode montar sua grade escolar personalizada e também incluir anotações nas aulas. ",-1)})),re=ee((function(){return(0,r._)("p",null," Entre para começar ",-1)})),ae=[te,ie,ne,re];function oe(e,t,i,n,a,o){return(0,r.wg)(),(0,r.iD)("div",null,ae)}var se=(0,r.aZ)({name:"HomeView",components:{},data:function(){return{}},emits:["goToPage"],methods:{goToPage:function(e){this.$emit("goToPage",e)}}});const ue=(0,W.Z)(se,[["render",oe],["__scopeId","data-v-a1b4ee30"]]);var ce=ue,le=function(e){return(0,r.dD)("data-v-163d8006"),e=e(),(0,r.Cn)(),e},de={class:"table"},fe=le((function(){return(0,r._)("caption",null,"Selecione um usuário para acessar a Grade Escolar.",-1)})),be=["onClick"],pe=le((function(){return(0,r._)("br",null,null,-1)})),he=le((function(){return(0,r._)("i",{class:"pi pi-id-card"},null,-1)}));function ve(e,t,i,n,o,s){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("section",de,[(0,r._)("table",null,[fe,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.usuarios,(function(t){return(0,r.wg)(),(0,r.iD)("tr",{class:"hover",onClick:function(i){return e.selecionar(t)}},[(0,r._)("td",null,(0,a.zw)(t.nome),1)],8,be)})),256))])])]),(0,r._)("p",null,[(0,r.Uk)(" se deseja criar um novo usuário..."),pe,(0,r._)("div",{onClick:t[0]||(t[0]=function(t){return e.goToPage("Cadastro")})},[he,(0,r.Uk)(" cadastre-se aqui. ")])])],64)}var ge=(0,r.aZ)({name:"LoginView",data:function(){return{service:new K,usuarios:void 0}},emits:["goToPage"],methods:{goToPage:function(e){this.$emit("goToPage",e)},selecionar:function(e){return(0,I.mG)(this,void 0,void 0,(function(){return(0,I.Jh)(this,(function(t){try{this.service.selecionar(e),this.goToPage("Menu")}catch(i){this.goToPage("Home")}return[2]}))}))},obterUsuarios:function(){return(0,I.mG)(this,void 0,void 0,(function(){var e;return(0,I.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this,[4,this.service.obterUsuarios()];case 1:return e.usuarios=t.sent(),[3,3];case 2:return t.sent(),this.goToPage("Home"),[3,3];case 3:return[2]}}))}))}},mounted:function(){return(0,I.mG)(this,void 0,void 0,(function(){return(0,I.Jh)(this,(function(e){switch(e.label){case 0:return[4,this.service.config()];case 1:return e.sent()?[4,this.obterUsuarios()]:(this.goToPage("Home"),[2]);case 2:return e.sent(),[2]}}))}))}});const me=(0,W.Z)(ge,[["render",ve],["__scopeId","data-v-163d8006"]]);var we=me,ye=function(e){return(0,r.dD)("data-v-434719e7"),e=e(),(0,r.Cn)(),e},_e={class:"form"},Pe=ye((function(){return(0,r._)("p",{style:{"text-align":"center"}},[(0,r.Uk)(" Todos os dados da sua Grade Escolar serão gravados somente neste dispositivo, "),(0,r._)("br"),(0,r.Uk)(" sendo assim, você precisa informar apenas seu nome para ter acesso. ")],-1)})),ke={class:"field"},Te=ye((function(){return(0,r._)("label",{for:"nome"},"Informe seu nome.",-1)})),Oe={class:"button"},De=ye((function(){return(0,r._)("button",{type:"submit"},"Entrar",-1)})),je={key:0},Se=ye((function(){return(0,r._)("p",{style:{"text-align":"left"}},[(0,r._)("br"),(0,r._)("br"),(0,r.Uk)(" Atenção!"),(0,r._)("br"),(0,r.Uk)(" Esta versão da Grade Escolar não faz uso de servidores para armazenarmento de dados."),(0,r._)("br"),(0,r.Uk)(" Todos os dados são armazenados no seu navegador, por este motivo não utilize uma janela anônima."),(0,r._)("br"),(0,r.Uk)(" Ao limpar os cookies e dados do site todas as informações da Grade Escolar serão eliminadas!"),(0,r._)("br"),(0,r.Uk)(" Você poderá criar uma cópia de segurança dos seus dados a qualquer momento, caso precise remover os cookies e dados do site ou mesmo trocar de dispositivo. ")],-1)}));function Ce(e,t,i,o,s,u){return(0,r.wg)(),(0,r.iD)("section",_e,[(0,r._)("form",{onSubmit:t[3]||(t[3]=(0,n.iM)((function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.cadastrarUsuario&&e.cadastrarUsuario.apply(e,t)}),["prevent"]))},[Pe,(0,r._)("div",ke,[Te,(0,r.wy)((0,r._)("input",{type:"text",id:"nome","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.usuario.nome=t}),autofocus:"",onKeyup:t[1]||(t[1]=function(t){return e.limparErro()}),onChange:t[2]||(t[2]=function(t){return e.limparErro()})},null,544),[[n.nr,e.usuario.nome]])]),(0,r._)("div",Oe,[De,e.submitResult?((0,r.wg)(),(0,r.iD)("mark",je,(0,a.zw)(e.submitResult),1)):(0,r.kq)("",!0)]),Se],32)])}var xe=(0,r.aZ)({name:"CadastroView",data:function(){return{service:new K,usuario:new z,submitResult:void 0}},computed:{formValido:function(){return this.usuario.nome&&""!=this.usuario.nome.trim()}},emits:["goToPage"],methods:{goToPage:function(e){this.$emit("goToPage",e)},limparErro:function(){this.submitResult&&(this.submitResult=void 0)},cadastrarUsuario:function(){return(0,I.mG)(this,void 0,void 0,(function(){var e;return(0,I.Jh)(this,(function(t){switch(t.label){case 0:if(!this.usuario.nome||""==this.usuario.nome.trim())return this.submitResult="Informe um nome de usuário.",[2];t.label=1;case 1:return t.trys.push([1,3,,4]),this.submitResult=void 0,[4,this.service.cadastrar(this.usuario.nome)];case 2:return t.sent(),this.usuario=new z,this.submitResult=void 0,this.goToPage("Menu"),[3,4];case 3:return e=t.sent(),this.submitResult=null!==e&&void 0!==e?e:"Falha ao cadastrar usuário!",[3,4];case 4:return[2]}}))}))}},mounted:function(){return(0,I.mG)(this,void 0,void 0,(function(){return(0,I.Jh)(this,(function(e){switch(e.label){case 0:return[4,this.service.config()];case 1:return e.sent()||this.goToPage("Home"),[2]}}))}))}});const Ge=(0,W.Z)(xe,[["render",Ce],["__scopeId","data-v-434719e7"]]);var Ae=Ge,Ie=function(e){return(0,r.dD)("data-v-d5b81a14"),e=e(),(0,r.Cn)(),e},Re={class:"menu"},qe=Ie((function(){return(0,r._)("i",{class:"pi pi-file-edit"},null,-1)})),Be=Ie((function(){return(0,r._)("span",null,[(0,r._)("h1",null,"Aulas"),(0,r._)("p",null,[(0,r.Uk)(" Acesse sua grade escolar."),(0,r._)("br"),(0,r.Uk)(" Anote seus conhecimentos. ")])],-1)})),Je=[qe,Be],He=Ie((function(){return(0,r._)("i",{class:"pi pi-book"},null,-1)})),Ee=Ie((function(){return(0,r._)("span",null,[(0,r._)("h1",null,"Anotações"),(0,r._)("p",null,[(0,r.Uk)(" Revise todos os seus conhecimentos."),(0,r._)("br")])],-1)})),Me=[He,Ee],Ve={class:"config"},Ue=Ie((function(){return(0,r._)("i",{class:"pi pi-cog"},null,-1)})),ze=Ie((function(){return(0,r._)("h1",null,"Configurações",-1)})),Ze=Ie((function(){return(0,r._)("p",null," Personalize sua grade escolar. ",-1)})),Fe={class:"submenu"},Le=Ie((function(){return(0,r._)("i",{class:"pi pi-save"},null,-1)})),Ne=Ie((function(){return(0,r._)("span",null,[(0,r._)("h1",null,"Cópia de segurança"),(0,r._)("p",null,[(0,r.Uk)(" Crie ou restaure um backup."),(0,r._)("br")])],-1)})),$e=[Le,Ne];function Ke(e,t,i,n,a,o){return(0,r.wg)(),(0,r.iD)("section",null,[(0,r._)("div",Re,[(0,r._)("span",{class:"lnk",onClick:t[0]||(t[0]=function(t){return e.goToPage("Aula")})},Je),(0,r._)("span",{class:"lnk",onClick:t[1]||(t[1]=function(t){return e.goToPage("Anotacoes")})},Me),(0,r._)("span",Ve,[Ue,(0,r._)("span",null,[ze,Ze,(0,r._)("div",Fe,[(0,r._)("span",{onClick:t[2]||(t[2]=function(t){return e.goToPage("DisciplinaConfig")})}," Disciplinas "),(0,r.Uk)(" | "),(0,r._)("span",{onClick:t[3]||(t[3]=function(t){return e.goToPage("GradeConfig")})}," Grade "),(0,r.Uk)(" | "),(0,r._)("span",{onClick:t[4]||(t[4]=function(t){return e.goToPage("AulaConfig")})}," Aulas ")])])]),(0,r._)("span",{class:"lnk",onClick:t[5]||(t[5]=function(t){return e.goToPage("Backup")})},$e)])])}var Ye=function(){function e(){}return Object.defineProperty(e,"usuario",{get:function(){var e=new z,t=localStorage.getItem("id_usuario"),i=localStorage.getItem("nome_usuario");return null!=t&&null!=i&&(e.id=parseInt(t),e.nome=i),e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"autenticado",{get:function(){var t=e.usuario;return void 0!=t.id&&void 0!=t.nome},enumerable:!1,configurable:!0}),e}(),We=Ye,Qe=(0,r.aZ)({name:"MenuView",data:function(){return{}},emits:["goToPage"],methods:{goToPage:function(e){this.$emit("goToPage",e)}},mounted:function(){We.autenticado||this.goToPage("Home")}});const Xe=(0,W.Z)(Qe,[["render",Ke],["__scopeId","data-v-d5b81a14"]]);var et=Xe,tt={class:"form"},it={class:"field"},nt=(0,r._)("label",{for:"data"},"Data",-1),rt={key:0},at={class:"table"},ot={key:0},st=(0,r._)("caption",null,null,-1),ut=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{class:"center",style:{width:"100px"}},"Aula"),(0,r._)("th",null,"Disciplina")])],-1),ct=["onClick"],lt={class:"center"},dt={key:1,class:"mark"},ft=(0,r._)("mark",{class:"info"},"Não existem aulas para a data selecionada.",-1),bt=[ft];function pt(e,t,i,o,s,u){var c,l=(0,r.up)("AnotacaoComponent");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("section",tt,[(0,r._)("form",null,[(0,r._)("div",it,[nt,(0,r.wy)((0,r._)("input",{id:"data",type:"date","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.data=t}),onChange:t[1]||(t[1]=function(t){return e.selecionarData()}),required:"",ref:"data"},null,544),[[n.nr,e.data]])])])]),e.data?((0,r.wg)(),(0,r.iD)("span",rt,[(0,r._)("section",at,[e.aulas?((0,r.wg)(),(0,r.iD)("table",ot,[st,ut,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.aulas,(function(t){var i;return(0,r.wg)(),(0,r.iD)("tr",{class:(0,a.C_)(["hover",{selecionada:e.aulaAtiva(t.aula)}]),onClick:function(i){return e.setAula(t)}},[(0,r._)("td",lt,(0,a.zw)(t.aula),1),(0,r._)("td",null,(0,a.zw)(null===(i=e.obterDisciplina(t.id_disciplina))||void 0===i?void 0:i.disciplina),1)],10,ct)})),256))])])):(0,r.kq)("",!0),e.aulas?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",dt,bt))]),(0,r.Wm)(l,{onEditando:e.editando,onGoToPage:e.goToPage,anotacao:e.anotacao,disciplina:e.obterDisciplina(null===(c=e.aula)||void 0===c?void 0:c.id_disciplina),"exibir-titulos":"",origem:"aula"},null,8,["onEditando","onGoToPage","anotacao","disciplina"])])):(0,r.kq)("",!0)],64)}var ht=function(){function e(){Object.defineProperty(this,"dia",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nome",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ativo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.dia=2,this.nome="segunda-feira",this.ativo=!0}return Object.defineProperty(e,"dias",{enumerable:!1,configurable:!0,writable:!0,value:function(){return[{dia:2,nome:"segunda-feira",ativo:!1},{dia:3,nome:"terça-feira",ativo:!1},{dia:4,nome:"quarta-feira",ativo:!1},{dia:5,nome:"quinta-feira",ativo:!1},{dia:6,nome:"sexta-feira",ativo:!1},{dia:7,nome:"sábado",ativo:!1},{dia:1,nome:"domingo",ativo:!1}]}}),Object.defineProperty(e,"meses",{enumerable:!1,configurable:!0,writable:!0,value:function(){return["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]}}),Object.defineProperty(e,"montarTodos",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.dias();return t.forEach((function(t){return t.ativo=-1!=e.indexOf(t.dia.toString())})),t}}),Object.defineProperty(e,"montarAtivos",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.dias().filter((function(t){return-1!=e.indexOf(t.dia.toString())}))}}),Object.defineProperty(e,"desmontar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.filter((function(e){return e.ativo})).map((function(e){return e.dia.toString()})).join(";")}}),Object.defineProperty(e,"obterDia",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=new Date("".concat(e,"T00:00:00.000-03:00")),i=t.getDay()+1,n=this.dias();return n.find((function(e){return e.dia==i}))}}),Object.defineProperty(e,"dataAtual",{enumerable:!1,configurable:!0,writable:!0,value:function(){return new Date(Date.now()-108e5)}}),Object.defineProperty(e,"mesAtual",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.dataAtual();return e.toISOString().substring(0,7)}}),Object.defineProperty(e,"obterMes",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.toISOString().substring(0,7)}}),Object.defineProperty(e,"dataCompleta",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return"".concat(this.dias().find((function(t){return t.dia==e.getDay()+1})).nome,", ").concat(e.getDate()," de ").concat(this.meses()[e.getMonth()]," de ").concat(e.getFullYear())}}),e}(),vt=ht,gt=function(e){return(0,r.dD)("data-v-2615ac6e"),e=e(),(0,r.Cn)(),e},mt={key:0,class:"titulo"},wt={class:"buttons"},yt={class:"disciplina"},_t=gt((function(){return(0,r._)("p",{class:"no-print"},"Editar",-1)})),Pt=[_t],kt={key:1,class:"no-print"},Tt=gt((function(){return(0,r._)("p",{class:"no-print"},[(0,r._)("i",{class:"pi pi-book"}),(0,r.Uk)(" Anotações ")],-1)})),Ot=[Tt],Dt={key:3,class:"no-print"},jt=gt((function(){return(0,r._)("p",{class:"no-print"},[(0,r._)("i",{class:"pi pi-file-edit"}),(0,r.Uk)(" Aula ")],-1)})),St=[jt],Ct={class:"no-print"},xt={key:6},Gt=gt((function(){return(0,r._)("p",{class:"no-print"},"Salvar",-1)})),At=[Gt],It={key:8},Rt=gt((function(){return(0,r._)("p",{class:"no-print"},"Cancelar",-1)})),qt=[Rt],Bt={key:1,class:"conteudo_edit"},Jt={key:0,class:"mk"},Ht=gt((function(){return(0,r._)("br",null,null,-1)})),Et=gt((function(){return(0,r._)("br",null,null,-1)})),Mt=(0,r.uE)('<br data-v-2615ac6e><br data-v-2615ac6e><h3 data-v-2615ac6e>### Eventos (provas, entrega de trabalhos, etc...)</h3><h1 data-v-2615ac6e># Título</h1><h2 data-v-2615ac6e>## Subtítulo</h2><p data-v-2615ac6e>Texto em **<strong data-v-2615ac6e>Negrito</strong>**, *<em data-v-2615ac6e>Itálico</em>*, ~~<s data-v-2615ac6e>Tachado</s>~~.</p><blockquote data-v-2615ac6e><p data-v-2615ac6e>&gt; Citação</p></blockquote><ul data-v-2615ac6e><li data-v-2615ac6e>- Lista</li><li data-v-2615ac6e>- Lista</li></ul><p data-v-2615ac6e>--- Linha divisória</p><hr data-v-2615ac6e><br data-v-2615ac6e><h4 data-v-2615ac6e>Tabelas</h4><p data-v-2615ac6e><b data-v-2615ac6e>Estrutura:</b></p><p style="margin-left:10px;margin-bottom:5px;" data-v-2615ac6e> Titulo das colunas<br data-v-2615ac6e> Alinhamento das colunas (esquerda, centralizado e direita)<br data-v-2615ac6e> Conteúdo da tabela </p><p data-v-2615ac6e><b data-v-2615ac6e>Exemplo:</b></p><p style="margin-left:10px;margin-bottom:5px;" data-v-2615ac6e> Coluna 1 | Coluna 2 | Coluna 3<br data-v-2615ac6e> :--- | :---: | ---:<br data-v-2615ac6e> Valor 1 | Valor 2 | Valor 3 </p><p data-v-2615ac6e><b data-v-2615ac6e>Resultado:</b></p><table style="margin-left:10px;margin-bottom:5px;" data-v-2615ac6e><caption data-v-2615ac6e></caption><header data-v-2615ac6e><tr data-v-2615ac6e><th style="text-align:left;" data-v-2615ac6e>Coluna 1</th><th style="text-align:center;" data-v-2615ac6e>Coluna 2</th><th style="text-align:right;" data-v-2615ac6e>Coluna 3</th></tr></header><tbody data-v-2615ac6e><tr data-v-2615ac6e><td style="text-align:left;" data-v-2615ac6e>Valor 1</td><td style="text-align:center;" data-v-2615ac6e>Valor 2</td><td style="text-align:right;" data-v-2615ac6e>Valor 3</td></tr></tbody></table><br data-v-2615ac6e><br data-v-2615ac6e><br data-v-2615ac6e><br data-v-2615ac6e><br data-v-2615ac6e>',23),Vt=["innerHTML"];function Ut(e,t,i,o,s,u){var c;return e.anotacao?((0,r.wg)(),(0,r.iD)("section",{key:0,class:(0,a.C_)(["container",{edit:e.edit}])},[(0,r._)("div",{class:(0,a.C_)(["subcontainer",{edit:e.edit}])},[e.exibirTitulos?((0,r.wg)(),(0,r.iD)("div",mt,[(0,r._)("span",null,[(0,r._)("p",null,(0,a.zw)(e.dataCompleta),1)]),(0,r._)("span",wt,[(0,r._)("span",null,[(0,r._)("p",null,[(0,r._)("span",null,(0,a.zw)(e.anotacao.aula)+"ª aula - ",1),(0,r._)("span",yt,(0,a.zw)(null===(c=e.disciplina)||void 0===c?void 0:c.disciplina),1)])]),e.edit?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",{key:0,class:"lnk",onClick:t[0]||(t[0]=function(t){return e.definirEdit(!0)})},Pt)),e.edit||"aula"!=e.origem?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",kt,"|")),e.edit||"aula"!=e.origem?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",{key:2,class:"lnk",onClick:t[1]||(t[1]=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.anotacoes&&e.anotacoes.apply(e,t)})},Ot)),e.edit||"anotacao"!=e.origem?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",Dt,"|")),e.edit||"anotacao"!=e.origem?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",{key:4,class:"lnk",onClick:t[2]||(t[2]=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.aula&&e.aula.apply(e,t)})},St)),e.edit?((0,r.wg)(),(0,r.iD)("span",{key:5,class:"lnk",onClick:t[3]||(t[3]=function(t){return e.alternarPreview()})},[(0,r._)("p",Ct,(0,a.zw)(e.preview?"Editar":"Visualizar"),1)])):(0,r.kq)("",!0),e.edit?((0,r.wg)(),(0,r.iD)("span",xt,"|")):(0,r.kq)("",!0),e.edit?((0,r.wg)(),(0,r.iD)("span",{key:7,class:"lnk",onClick:t[4]||(t[4]=function(t){return e.salvar()})},At)):(0,r.kq)("",!0),e.edit?((0,r.wg)(),(0,r.iD)("span",It,"|")):(0,r.kq)("",!0),e.edit?((0,r.wg)(),(0,r.iD)("span",{key:9,class:"lnk",onClick:t[5]||(t[5]=function(t){return e.definirEdit(!1)})},qt)):(0,r.kq)("",!0)])])):(0,r.kq)("",!0),e.edit&&!e.preview?((0,r.wg)(),(0,r.iD)("div",Bt,[(0,r.wy)((0,r._)("textarea",{id:"conteudo","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.conteudo_edit=t}),autofocus:"",ref:"ta"},null,512),[[n.nr,e.conteudo_edit,void 0,{trim:!0}]]),(0,r._)("span",{class:"lnk",onClick:t[7]||(t[7]=function(t){return e.help=!e.help})},"Como formatar esta anotação?"),e.help?((0,r.wg)(),(0,r.iD)("span",Jt,[Ht,Et,(0,r.Uk)(" Adicione os caracteres especiais #, *, >, ~ e - ao seu texto da forma como é apresentado abaixo: "),Mt])):(0,r.kq)("",!0)])):(0,r.kq)("",!0),!e.edit||e.preview?((0,r.wg)(),(0,r.iD)("div",{key:2,class:(0,a.C_)(["conteudo_view",{borda:e.exibirTitulos,preview:e.preview}])},[(0,r._)("span",{innerHTML:e.conteudo_view,class:(0,a.C_)(["mk",{sem_anotacao:"-- sem anotação --"==e.conteudo_view}])},null,10,Vt)],2)):(0,r.kq)("",!0)],2)],2)):(0,r.kq)("",!0)}var zt=function(){function e(){Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id_disciplina",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"aula",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"anotacao",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modo",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return e}(),Zt=zt,Ft=i(9980),Lt=i.n(Ft),Nt=function(e){function t(){return e.call(this,q.anotacaoTable)||this}return(0,I.ZT)(t,e),Object.defineProperty(t.prototype,"obter",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return new Promise((function(i,n){var r=t.db.transaction(t.table,"readonly"),a=r.objectStore(t.table),o=a.index("grade"==e.modo?"aula_disciplina_data":"disciplina_data"),s="grade"==e.modo?o.openCursor(IDBKeyRange.only([e.aula,e.id_disciplina,e.data])):o.openCursor(IDBKeyRange.bound([e.id_disciplina,e.data.substring(0,7)],[e.id_disciplina,e.data.substring(0,7)+"￿"])),u=[];s.onsuccess=function(){var e=this.result;e?(u.push(e.value),e.continue()):i(u)},s.onerror=function(){var e;console.log(this.error),n(null===(e=this.error)||void 0===e?void 0:e.message)}}))}}),Object.defineProperty(t.prototype,"salvar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return new Promise((function(i,n){var r=t.db.transaction(t.table,"readwrite"),a=r.objectStore(t.table),o=void 0,s=void 0;void 0!=e.id?o=void 0!=e.anotacao&&""!=e.anotacao?a.put(t.parseAnotacao(e,!1)):a.delete(e.id):void 0!=e.anotacao&&""!=e.anotacao?s=a.add(t.parseAnotacao(e,!0)):i(e),o&&(o.onsuccess=function(){i(e)},o.onerror=function(){var e;console.log(this.error),n(null===(e=this.error)||void 0===e?void 0:e.message)}),s&&(s.onsuccess=function(){e.id=this.result,i(e)},s.onerror=function(){var e;console.log(this.error),n(null===(e=this.error)||void 0===e?void 0:e.message)})}))}}),Object.defineProperty(t.prototype,"excluirPorDisciplina",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this.deleteByIndex("disciplina",e,t)}}),Object.defineProperty(t.prototype,"parseAnotacao",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return JSON.parse(JSON.stringify(e,(function(e,i){return t&&"id"==e||"modo"==e?void 0:i})))}}),t}(V),$t=Nt,Kt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,I.ZT)(t,e),Object.defineProperty(t.prototype,"config",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.baseConfig((function(){return new $t}))}}),Object.defineProperty(t.prototype,"obterAnotacao",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(0,I.mG)(this,void 0,Promise,(function(){var i,n,r;return(0,I.Jh)(this,(function(a){switch(a.label){case 0:return i=new Zt,i.aula=e.aula,i.id_disciplina=e.id_disciplina,i.data=t,i.modo="grade",[4,this.repository.obter(i)];case 1:return n=a.sent(),r=n[0],r&&(r.data=t),[2,(null===r||void 0===r?void 0:r.id)?r:i]}}))}))}}),Object.defineProperty(t.prototype,"obterAnotacoes",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(0,I.mG)(this,void 0,Promise,(function(){var i,n;return(0,I.Jh)(this,(function(r){switch(r.label){case 0:return i=new Zt,i.id_disciplina=e.id,i.data="".concat(t,"-01"),i.modo="disciplina",[4,this.repository.obter(i)];case 1:return n=r.sent(),[2,n]}}))}))}}),Object.defineProperty(t.prototype,"salvarAnotacao",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,I.mG)(this,void 0,Promise,(function(){return(0,I.Jh)(this,(function(t){return[2,this.repository.salvar(e)]}))}))}}),t}(N),Yt=Kt,Wt=function(){function e(){Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id_usuario",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"disciplina",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return e}(),Qt=Wt,Xt=(0,r.aZ)({name:"AnotacaoComponent",props:{anotacao:Zt,disciplina:Qt,exibirTitulos:Boolean,origem:String},data:function(){return{service:new Yt,edit:!1,preview:!1,dataCompleta:void 0,conteudo_view:void 0,conteudo_edit:void 0,help:!1,md:new(Lt())({xhtmlOut:!0,breaks:!0,linkify:!0})}},emits:["editando","goToPage"],methods:{definirDataCompleta:function(e){if(null===e||void 0===e?void 0:e.data){var t=new Date(e.data).toISOString().substring(0,10),i=new Date("".concat(t,"T00:00:00.000-03:00"));this.dataCompleta=vt.dataCompleta(i)}},definirConteudo:function(e){(null===e||void 0===e?void 0:e.anotacao)?(this.conteudo_edit=e.anotacao,this.conteudo_view=this.md.render(this.conteudo_edit)):(this.conteudo_edit=void 0,this.conteudo_view="-- sem anotação --")},definirEdit:function(e){this.definirConteudo(this.anotacao),this.edit=e,this.$emit("editando",this.edit),this.preview=!1,this.help=!1},alternarPreview:function(){if(this.preview=!this.preview,this.preview){var e=void 0==this.conteudo_edit||""==this.conteudo_edit?"-- sem anotação --":this.md.render(this.conteudo_edit);this.conteudo_view=e}},salvar:function(){return(0,I.mG)(this,void 0,void 0,(function(){var e;return(0,I.Jh)(this,(function(t){switch(t.label){case 0:return this.anotacao.anotacao=this.conteudo_edit,[4,this.service.salvarAnotacao(this.anotacao)];case 1:return e=t.sent(),this.anotacao.id=e.id,this.definirEdit(!1),[2]}}))}))},anotacoes:function(){var e;if(this.disciplina&&sessionStorage.setItem("anotacoes_disciplina",this.disciplina.id.toString()),null===(e=this.anotacao)||void 0===e?void 0:e.data){var t=new Date(this.anotacao.data).toISOString().substring(0,10),i=new Date("".concat(t,"T00:00:00.000-03:00")),n=vt.obterMes(i);sessionStorage.setItem("anotacoes_mes",n)}this.$emit("goToPage","Anotacoes")},aula:function(){if(this.anotacao){var e=new Date(this.anotacao.data).toISOString().substring(0,10);sessionStorage.setItem("aula_data",e),sessionStorage.setItem("aula_aula",this.anotacao.aula.toString())}this.$emit("goToPage","Aula")}},mounted:function(){return(0,I.mG)(this,void 0,void 0,(function(){return(0,I.Jh)(this,(function(e){switch(e.label){case 0:return[4,this.service.config()];case 1:return e.sent(),this.definirDataCompleta(this.anotacao),this.definirConteudo(this.anotacao),[2]}}))}))},watch:{anotacao:function(e){this.definirDataCompleta(e),this.definirConteudo(e)}}});const ei=(0,W.Z)(Xt,[["render",Ut],["__scopeId","data-v-2615ac6e"]]);var ti=ei,ii=function(){function e(){Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id_grade",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"id_disciplina",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"aula",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"dia",{enumerable:!0,configurable:!0,writable:!0,value:0})}return Object.defineProperty(e,"clone",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var i=new e;return i.id=t.id,i.id_grade=t.id_grade,i.id_disciplina=t.id_disciplina,i.aula=t.aula,i.dia=t.dia,i}}),Object.defineProperty(e,"montar",{enumerable:!1,configurable:!0,writable:!0,value:function(t,i,n){for(var r=new Array,a=function(a){var o=i.find((function(e){return e.aula==a&&e.id_grade==t.id&&e.dia==n}));o||(o={id:void 0,id_grade:t.id,aula:a,dia:n,id_disciplina:void 0}),r.push(e.clone(o))},o=1;o<=t.aulas;o++)a(o);return r}}),e}(),ni=ii,ri=function(e){function t(){return e.call(this,q.aulaTable)||this}return(0,I.ZT)(t,e),Object.defineProperty(t.prototype,"obter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){return(0,I.mG)(this,void 0,Promise,(function(){var n,r,a,o,s;return(0,I.Jh)(this,(function(u){return n=this.db.transaction(this.table,"readonly"),r=n.objectStore(this.table),a=r.index("grade_dia"),o=IDBKeyRange.only([e,t]),s=a.openCursor(o),[2,new Promise((function(e,t){var n=[];s.onsuccess=function(){var t=this.result;if(t){var r=t.value;r.aula<=i&&n.push(t.value),t.continue()}else e(n)},s.onerror=function(){var e;console.log(this.error),t(null===(e=this.error)||void 0===e?void 0:e.message)}}))]}))}))}}),Object.defineProperty(t.prototype,"salvar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return new Promise((function(i,n){var r=e.filter((function(e){return void 0==e.id&&void 0!=e.id_disciplina})),a=e.filter((function(e){return void 0!=e.id&&void 0!=e.id_disciplina})),o=e.filter((function(e){return void 0!=e.id&&void 0==e.id_disciplina})),s=t.db.transaction(t.table,"readwrite"),u=s.objectStore(t.table);r.forEach((function(e){return u.add(t.parseModel(e,!0))})),a.forEach((function(e){return u.put(t.parseModel(e,!1))})),o.forEach((function(e){return u.delete(e.id)})),s.oncomplete=function(){i()},s.onerror=function(){var e;console.log(this.error),n(null===(e=this.error)||void 0===e?void 0:e.message)}}))}}),Object.defineProperty(t.prototype,"excluirPorDisciplina",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this.deleteByIndex("disciplina",e,t)}}),t}(V),ai=ri,oi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,I.ZT)(t,e),Object.defineProperty(t.prototype,"config",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.baseConfig((function(){return new ai}))}}),Object.defineProperty(t.prototype,"obter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(-1==e.dias.indexOf(t.toString()))return Promise.resolve(new Array);var i=new ni;return i.id_grade=e.id,i.dia=t,this.repository.obter(e.id,t,e.aulas)}}),Object.defineProperty(t.prototype,"salvar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.repository.salvar(e)}}),Object.defineProperty(t.prototype,"sort",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.sort((function(e,t){return e.aula-t.aula}))}}),t}(N),si=oi,ui=function(e){function t(){return e.call(this,q.disciplinaTable)||this}return(0,I.ZT)(t,e),Object.defineProperty(t.prototype,"criar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.add(e)}}),Object.defineProperty(t.prototype,"obter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this.findOnly("usuario",e,t)}}),Object.defineProperty(t.prototype,"atualizar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.put(e)}}),t}(V),ci=ui,li=function(e){function t(){var t=e.call(this)||this;return Object.defineProperty(t,"aulaRepository",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"anotacaoRepository",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t.aulaRepository=new ai,t.anotacaoRepository=new $t,t}return(0,I.ZT)(t,e),Object.defineProperty(t.prototype,"config",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.baseConfig((function(){return new ci}))}}),Object.defineProperty(t.prototype,"sort",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.sort((function(e,t){return e.disciplina||t.disciplina?e.disciplina?t.disciplina?e.disciplina.localeCompare(t.disciplina):-1:1:0}))}}),Object.defineProperty(t.prototype,"clone",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=new Qt;return t.id=e.id,t.id_usuario=e.id_usuario,t.disciplina=e.disciplina,t}}),Object.defineProperty(t.prototype,"criar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.id_usuario=We.usuario.id,this.repository.criar(e)}}),Object.defineProperty(t.prototype,"obter",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;return(0,I.mG)(this,void 0,void 0,(function(){var t;return(0,I.Jh)(this,(function(i){switch(i.label){case 0:return[4,this.repository.obter(null!==(e=We.usuario.id)&&void 0!==e?e:0)];case 1:return t=i.sent(),[2,this.sort(t)]}}))}))}}),Object.defineProperty(t.prototype,"atualizar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.repository.atualizar(e)}}),Object.defineProperty(t.prototype,"excluir",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return new Promise((function(i,n){return(0,I.mG)(t,void 0,void 0,(function(){var t,r,a,o;return(0,I.Jh)(this,(function(s){switch(s.label){case 0:return t=this.repository.createTransaction([q.disciplinaTable,q.aulaTable,q.anotacaoTable]),r=this.anotacaoRepository.deleteByIndex("disciplina",e.id,t),a=this.aulaRepository.deleteByIndex("disciplina",e.id,t),o=this.repository.delete(e,t),[4,Promise.all([r,a,o])];case 1:return s.sent(),t.oncomplete=function(){i()},t.onerror=function(){var t;console.error("DisciplinaService.excluir:",e,this.error),n(null===(t=this.error)||void 0===t?void 0:t.message)},[2]}}))}))}))}}),t}(N),di=li,fi=function(e){function t(){return e.call(this,q.gradeTable)||this}return(0,I.ZT)(t,e),Object.defineProperty(t.prototype,"obter",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;return this.findOnly("usuario",null!==(e=We.usuario.id)&&void 0!==e?e:0)}}),Object.defineProperty(t.prototype,"atualizar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.put(e)}}),Object.defineProperty(t.prototype,"importarGrade",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i;return(0,I.mG)(this,void 0,Promise,(function(){var n,r;return(0,I.Jh)(this,(function(a){switch(a.label){case 0:return[4,this.findOnly("usuario",null!==(i=We.usuario.id)&&void 0!==i?i:0,t)];case 1:return n=a.sent(),r=n[0],r.aulas=e.aulas,r.dias=e.dias,[4,this.put(r,t)];case 2:return a.sent(),[2,r]}}))}))}}),t}(V),bi=fi,pi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,I.ZT)(t,e),Object.defineProperty(t.prototype,"config",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.baseConfig((function(){return new bi}))}}),Object.defineProperty(t.prototype,"obter",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,I.mG)(this,void 0,Promise,(function(){var e;return(0,I.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.repository.obter()];case 1:if(e=t.sent(),1!=e.length)throw new Error("Falha de banco de dados");return[2,e[0]]}}))}))}}),Object.defineProperty(t.prototype,"atualizar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,I.mG)(this,void 0,Promise,(function(){return(0,I.Jh)(this,(function(t){return[2,this.repository.atualizar(e)]}))}))}}),t}(N),hi=pi,vi=(0,r.aZ)({name:"AulaView",components:{AnotacaoComponent:ti},data:function(){return{disciplinaService:new di,gradeService:new hi,aulaService:new si,anotacaoService:new Yt,grade:void 0,disciplinas:void 0,disciplina:"",data:void 0,dia:void 0,aulas:void 0,aula:void 0,anotacao:void 0}},emits:["goToPage","hideBackButton"],methods:{goToPage:function(e){this.$emit("goToPage",e)},editando:function(e){return(0,I.mG)(this,void 0,void 0,(function(){return(0,I.Jh)(this,(function(t){return this.$emit("hideBackButton",e),[2]}))}))},selecionarData:function(e){return void 0===e&&(e=!1),(0,I.mG)(this,void 0,void 0,(function(){return(0,I.Jh)(this,(function(t){switch(t.label){case 0:return this.data?(this.dia=vt.obterDia(this.data),this.dia?[4,this.selecionarAula(e)]:[3,2]):[3,3];case 1:return t.sent(),[3,3];case 2:this.aula=void 0,this.anotacao=void 0,t.label=3;case 3:return[2]}}))}))},selecionarAula:function(e){return void 0===e&&(e=!1),(0,I.mG)(this,void 0,void 0,(function(){var t,i,n,r,a;return(0,I.Jh)(this,(function(o){switch(o.label){case 0:return[4,this.aulaService.obter(this.grade,this.dia.dia)];case 1:return t=o.sent(),t&&(t=this.aulaService.sort(t)),this.aulas=0==(null===t||void 0===t?void 0:t.length)?void 0:t,this.aulas?(i=0,e&&(n=sessionStorage.getItem("aula_aula"),n&&(r=Number(n),a=this.aulas.findIndex((function(e){return e.aula==r})),a>=0&&(i=a))),[4,this.setAula(this.aulas[i])]):[3,3];case 2:return o.sent(),[3,4];case 3:this.aula=void 0,this.anotacao=void 0,o.label=4;case 4:return this.focus(),[2]}}))}))},setAula:function(e){return(0,I.mG)(this,void 0,void 0,(function(){var t;return(0,I.Jh)(this,(function(i){switch(i.label){case 0:return this.aula=e,t=this,[4,this.anotacaoService.obterAnotacao(this.aula,this.data)];case 1:return t.anotacao=i.sent(),[2]}}))}))},obterDisciplina:function(e){var t;return null===(t=this.disciplinas)||void 0===t?void 0:t.find((function(t){return t.id==e}))},salvarAnotacao:function(){return(0,I.mG)(this,void 0,void 0,(function(){var e;return(0,I.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.anotacaoService.salvarAnotacao(this.anotacao)];case 1:return t.sent(),e=this,[4,this.anotacaoService.obterAnotacao(this.aula,this.data)];case 2:return e.anotacao=t.sent(),[2]}}))}))},aulaAtiva:function(e){var t;return(null===(t=this.aula)||void 0===t?void 0:t.aula)==e},focus:function(){var e=this.$refs.data;e.focus()},obterDadosIniciais:function(){return(0,I.mG)(this,void 0,void 0,(function(){var e,t,i,n,r,a,o;return(0,I.Jh)(this,(function(s){switch(s.label){case 0:return e=this.disciplinaService.obter(),t=this.gradeService.obter(),[4,Promise.all([e,t])];case 1:return i=s.sent(),n=i[0],r=i[1],this.disciplinas=n,this.grade=r,a=sessionStorage.getItem("aula_data"),a?this.data=a:(o=new Date(Date.now()-108e5),this.data=o.toISOString().substring(0,10),sessionStorage.setItem("data",this.data)),[2]}}))}))}},mounted:function(){return(0,I.mG)(this,void 0,void 0,(function(){var e;return(0,I.Jh)(this,(function(t){switch(t.label){case 0:return e=!We.autenticado,e?[3,2]:[4,this.aulaService.config()];case 1:e=!t.sent(),t.label=2;case 2:return e?(this.goToPage("Home"),[2]):[4,this.gradeService.config()];case 3:return t.sent(),[4,this.disciplinaService.config()];case 4:return t.sent(),[4,this.anotacaoService.config()];case 5:return t.sent(),this.$emit("hideBackButton",!1),[4,this.obterDadosIniciais()];case 6:return t.sent(),[4,this.selecionarData(!0)];case 7:return t.sent(),[2]}}))}))},watch:{data:function(e){sessionStorage.setItem("aula_data",e)},aula:function(e){sessionStorage.setItem("aula_aula",null===e||void 0===e?void 0:e.aula.toString())}}});const gi=(0,W.Z)(vi,[["render",pt]]);var mi=gi,wi=function(e){return(0,r.dD)("data-v-7accb459"),e=e(),(0,r.Cn)(),e},yi={class:"form"},_i={key:0},Pi={class:"field"},ki=wi((function(){return(0,r._)("label",{for:"disciplinas"},"Disciplina",-1)})),Ti=["value"],Oi={class:"field"},Di=wi((function(){return(0,r._)("label",{for:"mes"},"Mês",-1)})),ji={key:0,class:"field"},Si={class:"no-print"},Ci=wi((function(){return(0,r._)("label",{for:"titulos"},"Exibir títulos",-1)})),xi={key:1,class:"info"},Gi=wi((function(){return(0,r._)("mark",{class:"info"},"Não existem anotações.",-1)})),Ai=[Gi],Ii={key:1,class:"info"},Ri=wi((function(){return(0,r._)("mark",{class:"info"},"Não existem disciplinas cadastradas.",-1)})),qi=[Ri];function Bi(e,t,i,o,s,u){var c,l,d=(0,r.up)("AnotacaoComponent");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("section",yi,[(0,r._)("form",null,[e.disciplinas?((0,r.wg)(),(0,r.iD)("span",_i,[(0,r._)("div",Pi,[ki,(0,r.wy)((0,r._)("select",{id:"disciplinas","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.disciplina=t}),onChange:t[1]||(t[1]=function(t){return e.obterAnotacoes()})},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.disciplinas,(function(e){return(0,r.wg)(),(0,r.iD)("option",{value:e},(0,a.zw)(e.disciplina),9,Ti)})),256))],544),[[n.bM,e.disciplina]])]),(0,r._)("div",Oi,[Di,(0,r.wy)((0,r._)("input",{type:"month",id:"mes","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.mes=t}),onChange:t[3]||(t[3]=function(t){return e.obterAnotacoes()})},null,544),[[n.nr,e.mes]])]),null!==(l=null===(c=e.anotacoes)||void 0===c?void 0:c.length)&&void 0!==l&&l?((0,r.wg)(),(0,r.iD)("div",ji,[(0,r._)("span",Si,[(0,r.wy)((0,r._)("input",{type:"checkbox",id:"titulos",name:"titulos","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.exibirTitulos=t})},null,512),[[n.e8,e.exibirTitulos]]),Ci])])):((0,r.wg)(),(0,r.iD)("div",xi,Ai))])):((0,r.wg)(),(0,r.iD)("div",Ii,qi))])]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.anotacoes,(function(t){return(0,r.wg)(),(0,r.iD)("span",null,[(0,r.Wm)(d,{anotacao:t,disciplina:e.disciplina,"exibir-titulos":e.exibirTitulos,origem:"anotacao",onGoToPage:e.goToPage},null,8,["anotacao","disciplina","exibir-titulos","onGoToPage"])])})),256))],64)}var Ji=(0,r.aZ)({name:"AnotacoesView",components:{AnotacaoComponent:ti},data:function(){return{anotacaoService:new Yt,disciplinaService:new di,disciplinas:void 0,disciplina:void 0,exibirTitulos:!0,anotacoes:void 0,mes:void 0,md:new(Lt())({xhtmlOut:!0,breaks:!0,linkify:!0})}},emits:["goToPage"],methods:{goToPage:function(e){this.$emit("goToPage",e)},obterDisciplinas:function(){return(0,I.mG)(this,void 0,void 0,(function(){var e,t,i;return(0,I.Jh)(this,(function(n){switch(n.label){case 0:return e=this,[4,this.disciplinaService.obter()];case 1:return e.disciplinas=n.sent(),this.disciplinas&&(t=sessionStorage.getItem("anotacoes_disciplina"),i=this.disciplinas.find((function(e){return e.id==parseInt(null!==t&&void 0!==t?t:"0")})),this.disciplina=null!==i&&void 0!==i?i:this.disciplinas[0]),[2]}}))}))},obterAnotacoes:function(){return(0,I.mG)(this,void 0,void 0,(function(){var e;return(0,I.Jh)(this,(function(t){switch(t.label){case 0:return this.disciplina&&this.mes?(e=this,[4,this.anotacaoService.obterAnotacoes(this.disciplina,this.mes)]):[2];case 1:return e.anotacoes=t.sent(),[2]}}))}))},obterTitulo:function(e){return"Aula ".concat(e.aula," - ").concat(vt.dataCompleta(new Date(e.data)),".")},obterConteudo:function(e){return this.md.render(e.anotacao)},obterDisciplina:function(e){var t,i;return null===(i=null===(t=this.disciplinas)||void 0===t?void 0:t.find((function(t){return t.id==e})))||void 0===i?void 0:i.disciplina}},mounted:function(){var e;return(0,I.mG)(this,void 0,void 0,(function(){var t,i;return(0,I.Jh)(this,(function(n){switch(n.label){case 0:return t=!We.autenticado,t?[3,2]:[4,this.anotacaoService.config()];case 1:t=!n.sent(),n.label=2;case 2:return t?(this.goToPage("Home"),[2]):[4,this.disciplinaService.config()];case 3:return n.sent(),i=localStorage.getItem("exibir_titulos"),i&&(this.exibirTitulos="s"==i),this.mes=null!==(e=sessionStorage.getItem("anotacoes_mes"))&&void 0!==e?e:vt.mesAtual(),[4,this.obterDisciplinas()];case 4:return n.sent(),[4,this.obterAnotacoes()];case 5:return n.sent(),[2]}}))}))},watch:{exibirTitulos:function(e){localStorage.setItem("exibir_titulos",e?"s":"n")},mes:function(e){sessionStorage.setItem("anotacoes_mes",e)},disciplina:function(e){var t,i;sessionStorage.setItem("anotacoes_disciplina",null!==(i=null===(t=e.id)||void 0===t?void 0:t.toString())&&void 0!==i?i:"")}}});const Hi=(0,W.Z)(Ji,[["render",Bi],["__scopeId","data-v-7accb459"]]);var Ei=Hi,Mi=function(e){return(0,r.dD)("data-v-a328352a"),e=e(),(0,r.Cn)(),e},Vi={class:"form"},Ui={class:"field"},zi=Mi((function(){return(0,r._)("label",{for:"disciplina"},"Disciplina",-1)})),Zi={class:"button"},Fi={key:0},Li=Mi((function(){return(0,r._)("button",{type:"submit",id:"add"},"Incluir",-1)})),Ni=[Li],$i={key:1},Ki=Mi((function(){return(0,r._)("button",{type:"submit",id:"upd"},"Salvar",-1)})),Yi=Mi((function(){return(0,r._)("button",{type:"reset",id:"abt"},"Cancelar",-1)})),Wi={key:2,class:"error"},Qi={class:"table"},Xi=["onClick"];function en(e,t,i,o,s,u){var c=(0,r.up)("MsgBoxComponent");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("section",Vi,[(0,r._)("form",{onSubmit:t[4]||(t[4]=(0,n.iM)((function(t){return e.submit()}),["prevent"])),onReset:t[5]||(t[5]=(0,n.iM)((function(t){return e.reset()}),["prevent"]))},[(0,r._)("div",Ui,[zi,(0,r.wy)((0,r._)("input",{type:"text",id:"disciplina","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.disciplina.disciplina=t}),autofocus:"",ref:"disciplinaInput",onKeypress:t[1]||(t[1]=function(t){return e.clearResult()}),onChange:t[2]||(t[2]=function(t){return e.clearResult()})},null,544),[[n.nr,e.disciplina.disciplina]])]),(0,r._)("div",Zi,[e.disciplinaSelecionada?((0,r.wg)(),(0,r.iD)("span",$i,[Ki,(0,r._)("button",{type:"button",id:"del",onClick:t[3]||(t[3]=function(t){return e.del()})},"Excluir"),Yi])):((0,r.wg)(),(0,r.iD)("span",Fi,Ni)),e.result?((0,r.wg)(),(0,r.iD)("mark",Wi,(0,a.zw)(e.result),1)):(0,r.kq)("",!0)])],32)]),(0,r._)("section",Qi,[(0,r._)("table",null,[(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.disciplinas,(function(t){return(0,r.wg)(),(0,r.iD)("tr",{class:"hover",onClick:function(i){return e.selecionar(t)}},[(0,r._)("td",{class:(0,a.C_)({selecionada:e.disciplinaAtiva(t)})},(0,a.zw)(t.disciplina),3)],8,Xi)})),256))])])]),e.exibirExcluir?((0,r.wg)(),(0,r.j4)(c,{key:0,titulo:"Excluir Disciplina",mensagem:"As aulas e anotações desta disciplina também serão excluídas!<br />Você confirma esta exclusão?",icone:"pi pi-trash",yes:"",no:"",onMsgboxResult:e.msgboxResult},null,8,["onMsgboxResult"])):(0,r.kq)("",!0)],64)}var tn={class:"background"},nn={class:"box"},rn={class:"title"},an=["innerHTML"],on={class:"message"},sn=["innerHTML"],un={class:"footer"};function cn(e,t,i,n,o,s){return(0,r.wg)(),(0,r.iD)("div",tn,[(0,r._)("div",{class:"backdrop",onClick:t[0]||(t[0]=function(t){return e.msgboxResult(!1)})}),(0,r._)("div",nn,[(0,r._)("div",rn,[(0,r._)("span",{innerHTML:e.titulo},null,8,an)]),(0,r._)("div",on,[(0,r._)("i",{class:(0,a.C_)(e.icone)},null,2),(0,r._)("span",{innerHTML:e.mensagem},null,8,sn)]),(0,r._)("div",un,[e.yes?((0,r.wg)(),(0,r.iD)("button",{key:0,type:"button",onClick:t[1]||(t[1]=function(t){return e.msgboxResult(!0)})},"Sim")):(0,r.kq)("",!0),e.no?((0,r.wg)(),(0,r.iD)("button",{key:1,type:"button",onClick:t[2]||(t[2]=function(t){return e.msgboxResult(!1)})},"Não")):(0,r.kq)("",!0),e.ok?((0,r.wg)(),(0,r.iD)("button",{key:2,type:"button",onClick:t[3]||(t[3]=function(t){return e.msgboxResult(!0)})},"Ok")):(0,r.kq)("",!0),e.cancel?((0,r.wg)(),(0,r.iD)("button",{key:3,type:"button",onClick:t[4]||(t[4]=function(t){return e.msgboxResult(!1)})},"Cancelar")):(0,r.kq)("",!0)])])])}var ln=(0,r.aZ)({name:"MsgBoxComponent",props:{titulo:String,mensagem:String,icone:String,yes:Boolean,no:Boolean,ok:Boolean,cancel:Boolean},data:function(){return{}},emits:["msgboxResult"],methods:{msgboxResult:function(e){this.$emit("msgboxResult",e)},nothing:function(){}},mounted:function(){}});const dn=(0,W.Z)(ln,[["render",cn],["__scopeId","data-v-49079183"]]);var fn=dn,bn=(0,r.aZ)({name:"DisciplinaConfigView",components:{MsgBoxComponent:fn},data:function(){return{service:new di,result:void 0,disciplina:new Qt,disciplinaSelecionada:void 0,disciplinas:void 0,exibirExcluir:!1}},emits:["goToPage"],methods:{goToPage:function(e){this.$emit("goToPage",e)},obter:function(){return(0,I.mG)(this,void 0,void 0,(function(){var e;return(0,I.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this,[4,this.service.obter()];case 1:return e.disciplinas=t.sent(),[3,3];case 2:return t.sent(),this.result="Houve uma falha ao obter as disciplinas.",this.disciplinas=new Array,[3,3];case 3:return this.disciplina=new Qt,this.disciplinaSelecionada=void 0,this.result=void 0,this.focus(),[2]}}))}))},focus:function(){var e=this.$refs.disciplinaInput;e.focus()},submit:function(){var e;return(0,I.mG)(this,void 0,void 0,(function(){var t,i=this;return(0,I.Jh)(this,(function(n){switch(n.label){case 0:if(!this.disciplina.disciplina||""==this.disciplina.disciplina.trim())return this.result="Informe o nome da disciplina.",[2];if(void 0!=(null===(e=this.disciplinas)||void 0===e?void 0:e.find((function(e){var t,n;return(null===(t=e.disciplina)||void 0===t?void 0:t.toLowerCase())==(null===(n=i.disciplina.disciplina)||void 0===n?void 0:n.toLowerCase())}))))return this.result="A disciplina informada já existe.",[2];n.label=1;case 1:return n.trys.push([1,7,,8]),this.disciplinaSelecionada?[3,3]:[4,this.service.criar(this.disciplina)];case 2:return n.sent(),[3,5];case 3:return[4,this.service.atualizar(this.disciplina)];case 4:n.sent(),n.label=5;case 5:return[4,this.obter()];case 6:return n.sent(),[3,8];case 7:return t=n.sent(),this.result="Ocorreu um erro ao salvar a disciplina.",console.log(t),[3,8];case 8:return[2]}}))}))},reset:function(){this.disciplina=new Qt,this.disciplinaSelecionada=void 0,this.focus()},del:function(){this.exibirExcluir=!0},selecionar:function(e){this.disciplinaSelecionada=this.service.clone(e),this.disciplina=this.disciplinaSelecionada,this.focus()},disciplinaAtiva:function(e){var t;return(null===(t=this.disciplinaSelecionada)||void 0===t?void 0:t.id)==e.id},clearResult:function(){this.result&&(this.result=void 0)},msgboxResult:function(e){return(0,I.mG)(this,void 0,void 0,(function(){var t;return(0,I.Jh)(this,(function(i){switch(i.label){case 0:if(this.exibirExcluir=!1,!e)return[2];i.label=1;case 1:return i.trys.push([1,4,,5]),[4,this.service.excluir(this.disciplina)];case 2:return i.sent(),[4,this.obter()];case 3:return i.sent(),[3,5];case 4:return t=i.sent(),this.result=t.message,[3,5];case 5:return[2]}}))}))}},mounted:function(){return(0,I.mG)(this,void 0,void 0,(function(){var e;return(0,I.Jh)(this,(function(t){switch(t.label){case 0:return e=!We.autenticado,e?[3,2]:[4,this.service.config()];case 1:e=!t.sent(),t.label=2;case 2:return e?(this.goToPage("Home"),[2]):[4,this.obter()];case 3:return t.sent(),[2]}}))}))}});const pn=(0,W.Z)(bn,[["render",en],["__scopeId","data-v-a328352a"]]);var hn=pn,vn={class:"form"},gn=(0,r._)("label",{class:"checkboxlist"},"Dias de aula",-1),mn={class:"checkboxlist"},wn=["id","value","onUpdate:modelValue","name","disabled","onChange"],yn=["for"],_n={class:"field"},Pn=(0,r._)("label",{for:"aulas"},"Aulas por dia",-1),kn=["disabled"],Tn={class:"button"},On=(0,r._)("button",{type:"submit",id:"submit"},"Salvar",-1),Dn=(0,r._)("button",{type:"reset",id:"reset"},"Cancelar",-1),jn={key:0};function Sn(e,t,i,o,s,u){return(0,r.wg)(),(0,r.iD)("section",vn,[(0,r._)("form",{onSubmit:t[3]||(t[3]=(0,n.iM)((function(t){return e.persistirGrade()}),["prevent"])),onReset:t[4]||(t[4]=(0,n.iM)((function(t){return e.lerGrade()}),["prevent"]))},[gn,(0,r._)("div",mn,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.dias,(function(t){return(0,r.wg)(),(0,r.iD)("span",null,[(0,r.wy)((0,r._)("input",{type:"checkbox",id:t.nome,value:t.dia,"onUpdate:modelValue":function(e){return t.ativo=e},name:t.nome,disabled:!e.hasData,onChange:function(i){return e.validar(t)}},null,40,wn),[[n.e8,t.ativo]]),(0,r._)("label",{for:t.nome},(0,a.zw)(t.nome),9,yn)])})),256))]),(0,r._)("div",_n,[Pn,(0,r.wy)((0,r._)("input",{type:"number",id:"aulas",name:"aulas",min:"1",max:"10",step:"1",required:"","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.aulas=t}),disabled:!e.hasData,onKeypress:t[1]||(t[1]=function(t){return e.clearResult()}),onChange:t[2]||(t[2]=function(t){return e.clearResult()})},null,40,kn),[[n.nr,e.aulas,void 0,{number:!0}]])]),(0,r._)("div",Tn,[On,Dn,e.result?((0,r.wg)(),(0,r.iD)("mark",jn,(0,a.zw)(e.result),1)):(0,r.kq)("",!0)])],32)])}var Cn=(0,r.aZ)({name:"GradeConfigView",data:function(){return{service:new hi,hasData:!1,grade:new J,aulas:0,dias:vt.dias(),result:void 0}},emits:["goToPage"],methods:{goToPage:function(e){this.$emit("goToPage",e)},lerGrade:function(){this.dias=vt.montarTodos(this.grade.dias),this.aulas=this.grade.aulas},persistirGrade:function(){return(0,I.mG)(this,void 0,void 0,(function(){return(0,I.Jh)(this,(function(e){switch(e.label){case 0:return this.grade.dias=vt.desmontar(this.dias),this.grade.aulas=this.aulas,[4,this.service.atualizar(this.grade)];case 1:return e.sent(),this.result="Grade salva!",[2]}}))}))},obterGrade:function(){return(0,I.mG)(this,void 0,void 0,(function(){var e;return(0,I.Jh)(this,(function(t){switch(t.label){case 0:return e=this,[4,this.service.obter()];case 1:return e.grade=t.sent(),this.lerGrade(),this.hasData=!0,[2]}}))}))},validar:function(e){this.clearResult(),void 0==this.dias.find((function(e){return e.ativo}))&&(e.ativo=!0)},clearResult:function(){this.result&&(this.result=void 0)}},mounted:function(){return(0,I.mG)(this,void 0,void 0,(function(){var e;return(0,I.Jh)(this,(function(t){switch(t.label){case 0:return e=!We.autenticado,e?[3,2]:[4,this.service.config()];case 1:e=!t.sent(),t.label=2;case 2:return e?(this.goToPage("Home"),[2]):[4,this.obterGrade()];case 3:return t.sent(),[2]}}))}))}});const xn=(0,W.Z)(Cn,[["render",Sn]]);var Gn=xn,An={class:"form"},In={class:"field"},Rn=["disabled"],qn=["value"],Bn={class:"button"},Jn={key:0},Hn={key:1},En=(0,r._)("button",{type:"submit"},"Salvar",-1),Mn=(0,r._)("button",{type:"reset"},"Cancelar",-1),Vn=[En,Mn],Un={key:2,class:"error"},zn={class:"table"},Zn=(0,r._)("caption",null,null,-1),Fn=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{class:"center"},"Aula"),(0,r._)("th",{class:"center"},"Disciplina")])],-1),Ln={class:"center"},Nn=["onUpdate:modelValue","disabled"],$n=(0,r._)("option",{value:void 0},"-- aula vaga --",-1),Kn=["value"];function Yn(e,t,i,o,s,u){var c=(0,r.up)("Label");return(0,r.wg)(),(0,r.iD)("section",An,[(0,r._)("form",{onSubmit:t[4]||(t[4]=(0,n.iM)((function(t){return e.salvar()}),["prevent"])),onReset:t[5]||(t[5]=(0,n.iM)((function(t){return e.cancelar()}),["prevent"]))},[(0,r._)("div",In,[(0,r.Wm)(c,{for:"dia"},{default:(0,r.w5)((function(){return[(0,r.Uk)("Dia")]})),_:1}),(0,r.wy)((0,r._)("select",{id:"dia",name:"dia","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.dia=t}),disabled:e.edicao,onChange:t[1]||(t[1]=function(t){return e.obterDados()})},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.dias,(function(e){return(0,r.wg)(),(0,r.iD)("option",{value:e.dia},(0,a.zw)(e.nome),9,qn)})),256))],40,Rn),[[n.bM,e.dia]])]),(0,r._)("div",Bn,[e.edicao?((0,r.wg)(),(0,r.iD)("span",Hn,Vn)):((0,r.wg)(),(0,r.iD)("span",Jn,[e.bloquearEdicao?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("button",{key:0,type:"button",onClick:t[2]||(t[2]=function(t){return e.editar()})},"Editar")),e.bloquearEdicao?((0,r.wg)(),(0,r.iD)("button",{key:1,type:"button",onClick:t[3]||(t[3]=function(t){return e.goToPage("DisciplinaConfig")})},"Editar Disciplinas")):(0,r.kq)("",!0)])),e.result?((0,r.wg)(),(0,r.iD)("mark",Un,(0,a.zw)(e.result),1)):(0,r.kq)("",!0)]),(0,r._)("section",zn,[(0,r._)("table",null,[Zn,Fn,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.aulas,(function(t){return(0,r.wg)(),(0,r.iD)("tr",null,[(0,r._)("td",Ln,(0,a.zw)(t.aula),1),(0,r._)("td",null,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":function(e){return t.id_disciplina=e},disabled:!e.edicao},[$n,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.disciplinas,(function(e){return(0,r.wg)(),(0,r.iD)("option",{value:e.id},(0,a.zw)(e.disciplina),9,Kn)})),256))],8,Nn),[[n.bM,t.id_disciplina]])])])})),256))])])])],32)])}var Wn=(0,r.aZ)({name:"AulaConfigView",data:function(){return{disciplinaService:new di,gradeService:new hi,aulaService:new si,disciplinas:[],grade:new J,aulasDb:[],aulas:[],dia:void 0,dias:[],edicao:!1,result:void 0,bloquearEdicao:!1}},emits:["goToPage"],methods:{goToPage:function(e){this.$emit("goToPage",e)},editar:function(){this.edicao=!0},salvar:function(){return(0,I.mG)(this,void 0,void 0,(function(){return(0,I.Jh)(this,(function(e){switch(e.label){case 0:return[4,this.aulaService.salvar(this.aulas)];case 1:return e.sent(),this.edicao=!1,[2]}}))}))},cancelar:function(){this.ler(),this.edicao=!1},ler:function(){this.dias=vt.montarAtivos(this.grade.dias),this.aulas=ni.montar(this.grade,this.aulasDb,this.dia)},obterDadosIniciais:function(){return(0,I.mG)(this,void 0,void 0,(function(){var e,t,i,n,r;return(0,I.Jh)(this,(function(a){switch(a.label){case 0:return e=this.disciplinaService.obter(),t=this.gradeService.obter(),[4,Promise.all([e,t])];case 1:return i=a.sent(),n=i[0],r=i[1],this.disciplinas=n,this.grade=r,this.bloquearEdicao=0==this.disciplinas.length,this.bloquearEdicao&&(this.result="Não existem disciplinas cadastradas!"),[2]}}))}))},obterDados:function(){var e;return(0,I.mG)(this,void 0,void 0,(function(){var t;return(0,I.Jh)(this,(function(i){switch(i.label){case 0:return this.dia=null!==(e=this.dia)&&void 0!==e?e:Number(this.grade.dias.substring(0,1)),t=this,[4,this.aulaService.obter(this.grade,this.dia)];case 1:return t.aulasDb=i.sent(),this.ler(),[2]}}))}))}},mounted:function(){return(0,I.mG)(this,void 0,void 0,(function(){var e;return(0,I.Jh)(this,(function(t){switch(t.label){case 0:return e=!We.autenticado,e?[3,2]:[4,this.aulaService.config()];case 1:e=!t.sent(),t.label=2;case 2:return e?(this.goToPage("Home"),[2]):[4,this.gradeService.config()];case 3:return t.sent(),[4,this.disciplinaService.config()];case 4:return t.sent(),[4,this.obterDadosIniciais()];case 5:return t.sent(),[4,this.obterDados()];case 6:return t.sent(),[2]}}))}))}});const Qn=(0,W.Z)(Wn,[["render",Yn]]);var Xn=Qn,er=function(e){return(0,r.dD)("data-v-74dec1ae"),e=e(),(0,r.Cn)(),e},tr={class:"form"},ir=er((function(){return(0,r._)("p",{style:{"text-align":"left"}},[(0,r.Uk)(" Seus dados serão exportados em um arquivo no formato ge_bkp."),(0,r._)("br"),(0,r.Uk)(" Realize este backup caso precise remover os cookies e dados do site ou trocar de dispositivo. ")],-1)})),nr={class:"button"},rr={key:0},ar=er((function(){return(0,r._)("hr",null,null,-1)})),or=er((function(){return(0,r._)("p",{style:{"text-align":"left"}},[(0,r.Uk)(" Selecione um arquivo de backup (ge_bkp) e inicie a importação."),(0,r._)("br"),(0,r.Uk)(" Obs.: Os dados atuais serão substituídos pelo conteúdo do arquivo! ")],-1)})),sr={class:"button"},ur={key:0},cr={id:"download",ref:"download",style:{display:"none"}};function lr(e,t,i,n,o,s){var u=(0,r.up)("MsgBoxComponent");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("section",tr,[(0,r._)("form",null,[ir,(0,r._)("div",nr,[(0,r._)("button",{type:"button",onClick:t[0]||(t[0]=function(t){return e.exportar()})},"Exportar"),e.exportResult?((0,r.wg)(),(0,r.iD)("mark",rr,(0,a.zw)(e.exportResult),1)):(0,r.kq)("",!0)]),ar,or,(0,r._)("div",sr,[(0,r._)("button",{type:"button",onClick:t[1]||(t[1]=function(t){return e.importar()})},"Importar"),e.importResult?((0,r.wg)(),(0,r.iD)("mark",ur,(0,a.zw)(e.importResult),1)):(0,r.kq)("",!0)])])]),e.exibirImportar?((0,r.wg)(),(0,r.j4)(u,{key:0,titulo:"Importar Backup",mensagem:"Os dados atuais serão substituídos pelo conteúdo do arquivo!<br />Você confirma esta importação?",icone:"pi pi-trash",yes:"",no:"",onMsgboxResult:e.msgboxResult},null,8,["onMsgboxResult"])):(0,r.kq)("",!0),(0,r._)("a",cr,null,512),(0,r._)("input",{id:"inputFile",ref:"inputFile",type:"file",accept:".ge_bkp",onChange:t[2]||(t[2]=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.selectFile&&e.selectFile.apply(e,t)}),style:{display:"none"}},null,544)],64)}var dr=function(){function e(){Object.defineProperty(this,"usuario",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"grade",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"disciplinas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"aulas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"anotacoes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dataBkp",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return e}(),fr=dr,br=function(e){function t(){var t=e.call(this)||this;return Object.defineProperty(t,"gradeRepository",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"disciplinaRepository",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"aulaRepository",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"anotacaoRepository",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t.gradeRepository=new bi,t.disciplinaRepository=new ci,t.aulaRepository=new ai,t.anotacaoRepository=new $t,t}return(0,I.ZT)(t,e),Object.defineProperty(t.prototype,"config",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.baseConfig((function(){return new F}))}}),Object.defineProperty(t.prototype,"criar",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,I.mG)(this,void 0,Promise,(function(){var e,t,i,n,r,a,o,s,u,c,l,d,f,b,p,h;return(0,I.Jh)(this,(function(v){switch(v.label){case 0:e=We.usuario.id,v.label=1;case 1:return v.trys.push([1,3,,4]),t=this.repository.getById(e),i=this.gradeRepository.getAll(),n=this.disciplinaRepository.getAll(),r=this.aulaRepository.getAll(),a=this.anotacaoRepository.getAll(),[4,Promise.all([t,i,n,r,a])];case 2:return o=v.sent(),s=o[0],u=o[1],c=o[2],l=o[3],d=o[4],f=new fr,f.usuario=s,f.grade=u.find((function(t){return t.id_usuario==e})),f.disciplinas=c.filter((function(t){return t.id_usuario==e})),f.aulas=l.filter((function(e){return e.id_grade==f.grade.id})),f.anotacoes=d.filter((function(e){return f.disciplinas.some((function(t){return t.id==e.id_disciplina}))})),b=btoa(JSON.stringify(f)),p=new Blob([b],{type:"text/plain"}),[2,p];case 3:throw h=v.sent(),console.error("BackupService.criar",h),new Error("Houve uma falha na criação do backup.");case 4:return[2]}}))}))}}),Object.defineProperty(t.prototype,"importar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,I.mG)(this,void 0,Promise,(function(){var t=this;return(0,I.Jh)(this,(function(i){return[2,new Promise((function(i,n){return(0,I.mG)(t,void 0,void 0,(function(){var t,n;return(0,I.Jh)(this,(function(r){switch(r.label){case 0:return[4,this.obterBackup(e)];case 1:return t=r.sent(),n=this.repository.createTransaction([q.disciplinaTable,q.gradeTable,q.aulaTable,q.anotacaoTable]),[4,this.importarDados(t,n)];case 2:return r.sent(),n.oncomplete=function(){i()},n.onerror=function(){throw console.error("BackupService.importar",this.error),new Error("Houve uma falha na importação do backup.")},[2]}}))}))}))]}))}))}}),Object.defineProperty(t.prototype,"importarDados",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(0,I.mG)(this,void 0,Promise,(function(){var i,n=this;return(0,I.Jh)(this,(function(r){switch(r.label){case 0:return e.usuario=We.usuario,e.grade?(e.grade.id_usuario=e.usuario.id,i=e,[4,this.gradeRepository.importarGrade(e.grade,t)]):[2];case 1:return i.grade=r.sent(),[4,this.excluirDadosAtuais(t)];case 2:return r.sent(),e.disciplinas?(e.disciplinas.forEach((function(i){return(0,I.mG)(n,void 0,void 0,(function(){var n,r,a,o,s,u;return(0,I.Jh)(this,(function(c){switch(c.label){case 0:return n=null===(s=e.aulas)||void 0===s?void 0:s.filter((function(e){return e.id_disciplina==i.id})),r=null===(u=e.anotacoes)||void 0===u?void 0:u.filter((function(e){return e.id_disciplina==i.id})),i.id_usuario=e.usuario.id,[4,this.disciplinaRepository.add(i,t)];case 1:return c.sent(),a=this.importarAulas(t,e.grade.id,i.id,n),o=this.importarAnotacoes(t,i.id,r),[4,Promise.all([a,o])];case 2:return c.sent(),[2]}}))}))})),[2]):[2]}}))}))}}),Object.defineProperty(t.prototype,"importarAnotacoes",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){return(0,I.mG)(this,void 0,Promise,(function(){var n=this;return(0,I.Jh)(this,(function(r){return i?(i.forEach((function(i){return(0,I.mG)(n,void 0,void 0,(function(){return(0,I.Jh)(this,(function(n){switch(n.label){case 0:return i.id_disciplina=t,[4,this.anotacaoRepository.add(i,e)];case 1:return n.sent(),[2]}}))}))})),[2]):[2]}))}))}}),Object.defineProperty(t.prototype,"importarAulas",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,n){return(0,I.mG)(this,void 0,Promise,(function(){var r=this;return(0,I.Jh)(this,(function(a){return n?(n.forEach((function(n){return(0,I.mG)(r,void 0,void 0,(function(){return(0,I.Jh)(this,(function(r){switch(r.label){case 0:return n.id_grade=t,n.id_disciplina=i,[4,this.aulaRepository.add(n,e)];case 1:return r.sent(),[2]}}))}))})),[2]):[2]}))}))}}),Object.defineProperty(t.prototype,"excluirDadosAtuais",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,I.mG)(this,void 0,void 0,(function(){var t,i=this;return(0,I.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.disciplinaRepository.obter(We.usuario.id,e)];case 1:return t=n.sent(),t.forEach((function(t){return(0,I.mG)(i,void 0,void 0,(function(){var i,n,r;return(0,I.Jh)(this,(function(a){switch(a.label){case 0:return i=this.anotacaoRepository.excluirPorDisciplina(t.id,e),n=this.aulaRepository.excluirPorDisciplina(t.id,e),r=this.disciplinaRepository.delete(t,e),[4,Promise.all([i,n,r])];case 1:return a.sent(),[2]}}))}))})),[2]}}))}))}}),Object.defineProperty(t.prototype,"obterBackup",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new Promise((function(t,i){try{var n=new FileReader;n.readAsText(e),n.onload=function(){var e=this.result,i=JSON.parse(atob(e));t(i)}}catch(r){console.log("BackupService.obterBackup",r),i(r)}}))}}),Object.defineProperty(t.prototype,"zeroFill",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return e.toString().padStart(t,"0")}}),Object.defineProperty(t.prototype,"getDataAtualFormatada",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=new Date,t=this.zeroFill(e.getFullYear(),4),i=this.zeroFill(e.getMonth()+1,2),n=this.zeroFill(e.getDate(),2),r=this.zeroFill(e.getHours(),2),a=this.zeroFill(e.getMinutes(),2),o=this.zeroFill(e.getSeconds(),2);return"".concat(t).concat(i).concat(n,"_").concat(r).concat(a).concat(o)}}),Object.defineProperty(t.prototype,"obterNomeArquivo",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=We.usuario.nome.replace(" ","").toLowerCase(),t=this.getDataAtualFormatada();return"grade_escolar_".concat(e,"_").concat(t,".ge_bkp")}}),t}(N),pr=br,hr=(0,r.aZ)({name:"BackupView",components:{MsgBoxComponent:fn},data:function(){return{service:new pr,exportResult:void 0,importResult:void 0,exibirImportar:!1,importFile:void 0}},emits:["goToPage"],methods:{goToPage:function(e){this.$emit("goToPage",e)},exportar:function(){return(0,I.mG)(this,void 0,void 0,(function(){var e,t,i;return(0,I.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.service.criar()];case 1:return e=n.sent(),t=this.$refs.download,t.href=URL.createObjectURL(e),t.download=this.service.obterNomeArquivo(),t.click(),t.href="",t.download="",this.exportResult="Exportação concluída!",[3,3];case 2:return i=n.sent(),this.exportResult=i.message,[3,3];case 3:return[2]}}))}))},msgboxResult:function(e){return(0,I.mG)(this,void 0,void 0,(function(){return(0,I.Jh)(this,(function(t){switch(t.label){case 0:if(this.exibirImportar=!1,!e)return[2];if(void 0==this.importFile)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.service.importar(this.importFile)];case 2:return t.sent(),this.importResult="Importação concluída.",[3,4];case 3:return t.sent(),this.importResult="O arquivo informado não é válido!",[3,4];case 4:return[2]}}))}))},importar:function(){this.importResult=void 0,this.exportResult=void 0;var e=this.$refs.inputFile;e.value="",e.files=null,e.click()},selectFile:function(e){this.importFile=void 0;var t=e.target;t.files&&(this.importFile=t.files[0],this.exibirImportar=!0)}},mounted:function(){return(0,I.mG)(this,void 0,void 0,(function(){var e;return(0,I.Jh)(this,(function(t){switch(t.label){case 0:return e=!We.autenticado,e?[3,2]:[4,this.service.config()];case 1:e=!t.sent(),t.label=2;case 2:return e&&this.goToPage("Home"),[2]}}))}))}});const vr=(0,W.Z)(hr,[["render",lr],["__scopeId","data-v-74dec1ae"]]);var gr=vr,mr=(0,r.aZ)({name:"App",components:{HeaderComponent:X,HomeView:ce,LoginView:we,CadastroView:Ae,MenuView:et,AulaView:mi,AnotacoesView:Ei,DisciplinaConfigView:hn,GradeConfigView:Gn,AulaConfigView:Xn,BackupView:gr},data:function(){return{page:void 0,hideBackButton:!1,usuario:We.usuario}},methods:{goToPage:function(e){this.page=e},definirHideBackButton:function(e){this.hideBackButton=e},sair:function(){localStorage.removeItem("access_token"),this.goToPage("Home")},handleBeforeUnload:function(e){e.preventDefault(),e.returnValue=""}},mounted:function(){var e=localStorage.getItem("page");e?this.page=e:(localStorage.setItem("page","Home"),this.page="Home");var t=localStorage.getItem("hide_back_button");t?this.hideBackButton="s"==t:localStorage.setItem("hide_back_button","n")},watch:{page:function(e){localStorage.setItem("page",e),this.usuario=We.usuario},hideBackButton:function(e){localStorage.setItem("hide_back_button",e?"s":"n")}}});const wr=(0,W.Z)(mr,[["render",w]]);var yr=wr,_r=(0,n.ri)(yr);_r.mount("#app")}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,i),a.exports}i.m=e,function(){var e=[];i.O=function(t,n,r,a){if(!n){var o=1/0;for(l=0;l<e.length;l++){n=e[l][0],r=e[l][1],a=e[l][2];for(var s=!0,u=0;u<n.length;u++)(!1&a||o>=a)&&Object.keys(i.O).every((function(e){return i.O[e](n[u])}))?n.splice(u--,1):(s=!1,a<o&&(o=a));if(s){e.splice(l--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[n,r,a]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,a,o=n[0],s=n[1],u=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in s)i.o(s,r)&&(i.m[r]=s[r]);if(u)var l=u(i)}for(t&&t(n);c<o.length;c++)a=o[c],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(l)},n=self["webpackChunkv2"]=self["webpackChunkv2"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(3347)}));n=i.O(n)})();
//# sourceMappingURL=app.08db1ac6.js.map